<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>LeafletJs</title>
    <link href="scripts/leaflet/leaflet.css" rel="stylesheet" />
    <!--<link href="style/app.css" rel="stylesheet" />-->
    <meta charset="utf-8" />
    <style media="screen">
        body {
            padding: 0;
            margin: 0;
        }

        html, body, #map {
            height: 100%;
        }
    </style>

</head>
<body>
    <div id="map"></div>
    <script src="scripts/jquery/3.1.0/jquery-3.1.0.js"></script>
    <script src="scripts/leaflet/leaflet.js"></script>
    <script src="scripts/leaflet/leaflet.ChineseTmsProviders.js"></script>
    <script src="scripts/leaflet/leaflet-bing-layer.js"></script>
    <script src="scripts/geocoder/Control.Geocoder.js"></script>
    <link href="scripts/geocoder/Control.Geocoder.css" rel="stylesheet" />
    <script type="text/javascript">
        var normalm = L.tileLayer.chinaProvider('GaoDe.Normal.Map', {
            maxZoom: 18,
            minZoom: 5,
            attribution: '高德地图',
        });
        var imgm = L.tileLayer.chinaProvider('GaoDe.Satellite.Map', {
            maxZoom: 18,
            minZoom: 5,
            attribution: '高德地图',
        });
        var imga = L.tileLayer.chinaProvider('GaoDe.Satellite.Annotion', {
            maxZoom: 18,
            minZoom: 5,
            attribution: '高德地图',
        });

        var normal = L.layerGroup([normalm]),
            image = L.layerGroup([imgm, imga]);

        var baseLayers = {
            "地图": normal,
            "影像": image,
        }

        var map = L.map("map", {
            center: [22.537145, 114.019384],
            zoom: 16,
            layers: [normal],
            zoomControl: false
        });
        //设置层
        L.control.layers(baseLayers, null).addTo(map);

        //设置缩放控件
        L.control.zoom({
            zoomInTitle: '放大',
            zoomOutTitle: '缩小'
        }).addTo(map);

        //添加标记
        var marker = L.marker([22.537145, 114.019384]).addTo(map);
        marker.bindPopup("<b>九润大厦</b>").openPopup();

        //添加搜索
        var geocoder = L.Control.geocoder({
            defaultMarkGeocode: false
        })
    .on('markgeocode', function (e) {
        var bbox = e.geocode.bbox;
        var poly = L.polygon([
             bbox.getSouthEast(),
             bbox.getNorthEast(),
             bbox.getNorthWest(),
             bbox.getSouthWest()
        ]).addTo(map);
        map.fitBounds(poly.getBounds());
    })
    .addTo(map);

        //var popup = L.popup();
        //function onMapClick(e) {
        //    popup
        //        .setLatLng(e.latlng)
        //        .setContent("你点击的地理位置在" + e.latlng.toString())
        //        .openOn(mymap);
        //}

        //mymap.on('click', onMapClick);

        //mymap.on('viewreset', function (e) {
        //    console.log(e);
        //});
        //mymap.on('resize', function (e) {
        //    console.log(e);
        //});

        //mymap.on('moveend', function (e) {
        //    console.log(e);
        //});

        //mymap.on('dragend', function (e) {
        //    console.log(e);
        //});


        //    var circle = L.circle([22.537145, 114.019384], 10, { color: 'red', fillColor: '#f03', fillOpacity: 0.3 }).addTo(mymap);

    </script>

</body>
</html>
